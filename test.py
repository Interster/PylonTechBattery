from PylonPara import *
import serial

def stuurPylonSerie(bytestosend):
    with serial.Serial('/dev/ttyUSB0', 1200, timeout=5.0) as ser:
        x = ser.write(unhexlify(bytestosend)) # Stuur opdrag na die battery
        uitstring = ser.read(1000)
        
        leeswaardehex = uitstring.hex()
    
    return leeswaardehex

def main():
    # Standaard voorbeeld:  Vra een battery se data
    bytestosend = '7E3230303134363432453030323031464433350D'

    #a = '7e3230303134363030463037413131303130463043433930434342304343413043434130434342304343413043434130434339304343413043433930434341304343413043433930434341304343393035304243333042394230423942304239423042394246464442424644334646464630344646464630304638303042333338303132313130453131300d'
    
    # Parallel battery:  Vra alle data van alle batterye in batterypak
    # Voorbeeld van suksesvolle uitsetstring:
    #a = '7e323030313436303031304630313130323046304445353044453530444344304445353044453230444533304445353044453230444538304445353044444530444537304445373044453730444535303530423942304237333042373330423744304237333030303044303444464646463034464646463030463530313233463430313231313030463044453330444534304445323044453430444430304445333044453430444534304445373044453530444534304445353044453630444536304445363035304239423042374430423744304237443042374430303030443034464646464630344646464630304339303132334634303132313130433731430d'
    
    # Vra alle batterye in die groep
    #bytestosend = '7E3230303134363432453030324646464430410D'
    #a = '7e323030313436303031304630313130323046304343413043434330434341304343413043434230434341304343393043433830434339304343393043433930434341304343413043434130434338303530424333304239423042394230423942304239424646444242464431464646463034464646463030463830304233333830313231313030463043433930434339304343423043433930434339304343393043433930434339304343413043433930434338304343393043433930434339304343393035304242393042394230423942304239423042394246464442424643394646464630344646464630304342303042303534303132313130433542350d'
    # Vra tweede battery in die groep
    #bytestosend = '7E3230303134363432453030323032464433340D'
    #a = '7e3230303134363030463037413131303230463043433930434341304343423043433930434339304343383043434130434339304343413043433930434341304343413043434130434341304343413035304242393042394230423942304239423042394246464442424644304646464630344646464630304342303042303534303132313130453131350d'

    
    a = stuurPylonSerie(bytestosend)
    
    print('Hier is uitset')
    print(a)


if __name__ == "__main__":
    main()
